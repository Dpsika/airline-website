(self.travelpayoutsWpPlugin=self.travelpayoutsWpPlugin||[]).push([[747],{71637:e=>{e.exports={stylesSpinner:"styles-spinner__xe3v1",spinner:"spinner__djGmZ"}},38224:e=>{e.exports={stylesLabel:"styles-label__HvOkB",stylesIframe:"styles-iframe__U1ZGw",stylesIframeWrapper:"styles-iframe-wrapper__gsami",stylesIframeLoaded:"styles-iframe--loaded__ADJ91",stylesLoader:"styles-loader__pRZ5d"}},40778:(e,t,r)=>{"use strict";r.d(t,{DO:()=>s,Pn:()=>n});const s="accordionContainer:opened",n="accordionContainer:closed"},65747:(e,t,r)=>{"use strict";r.r(t),r.d(t,{WidgetPreviewWrapper:()=>b});var s,n=r(42094),l=r(83578),a=r(80631),i=r.n(a),c=r(27378),o=r(9957),p=r(51461),d=r(40778),u=r(76132),m=r.n(u);!function(e){e.iframe="iframe",e.script="iframe_script"}(s||(s={}));var f=r(60042),y=r.n(f),v=r(76531),g=r(71637);const _=()=>c.createElement("div",{className:y()(g.stylesSpinner)},c.createElement("div",null),c.createElement("div",null),c.createElement("div",null),c.createElement("div",null));var E=r(38224);const h=({title:e,iframeOptions:t})=>{const[r,s]=(0,c.useState)(!0);return c.createElement("div",null,c.createElement("div",{className:y()(E.stylesLabel)},e),c.createElement("div",{className:y()(E.stylesIframeWrapper)},r?c.createElement("div",{className:y()(E.stylesLoader)},c.createElement(_,null)):null,c.createElement(v.Z,Object.assign({checkOrigin:!1,autoResize:!0,heightCalculationMethod:"bodyScroll",className:y()(E.stylesIframe,r?null:E.stylesIframeLoaded),scrolling:!1,onInit:()=>s(!1)},t))))},b=e=>{const{formSelector:t,fieldPrefix:r,attributes:a,type:u,previewEndpoint:f,previewText:y="Preview"}=e,[v,g]=(0,c.useState)(null),[_,E]=(0,o.YD)({threshold:0,triggerOnce:!0});(0,c.useEffect)((()=>{(0,n.on)(d.DO,"body",b),(0,n.on)(p.t,"body",(()=>{b()}))}),[]),(0,c.useEffect)((()=>{b()}),[t,r]);const b=()=>g(((e,t)=>{const r=document.querySelector(e);if(r){const e=m()(r,{hash:!0});if(e.option_page){const r=e.option_page.replace("_group","");if(e[r]){const s=e[r];return Object.entries(s).filter((([e])=>e.match(`^(${t})_`))).reduce(((e,[r,s])=>Object.assign(Object.assign({},e),{[r.replace(`${t}_`,"")]:s})),{})}}}return null})(t,r)),O=(0,c.useMemo)((()=>v?{fields:v,parseInt:e=>parseInt(e,10),not:(e,t="")=>{let r=e;return e&&e.length||(r=t),!parseInt(r,10)},toBoolean:e=>!e||"1"!==e&&"true"!==e?"false":"true"}:null),[v]),I=(0,c.useMemo)((()=>{const e={};return a&&Object.entries(a).forEach((t=>{const[r,s]=t;if(s){const t=i()(s,{interpolate:/{{([\s\S]+?)}}/g}),n=O?t(O):s;e[r]="src"===r?(e=>encodeURI(e).replace(/#/g,"%23"))(n):n}})),e.src=[f,l.Base64.encode(e.src),"&type="+(u&&u===s.script?0:1)].join(""),e}),[O,a]);return c.createElement("div",{ref:_},E?c.createElement(h,{title:y,iframeOptions:I}):c.createElement(c.Fragment,null,"Â "))}},51461:(e,t,r)=>{"use strict";r.d(t,{t:()=>s});const s="reduxFramework:onChangeFields"}}]);